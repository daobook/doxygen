<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Doxygen: Doxygen Internals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Doxygen"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,true,'search.php','搜索');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="de/d6a/class_doxygen.html" title="This class serves as a namespace for global variables used by doxygen.">Doxygen</a> Internals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
Introduction</h1>
<p>This page provides a high-level overview of the internals of doxygen, with links to the relevant parts of the code. This document is intended for developers who want to work on doxygen. Users of doxygen are referred to the <a href="https://www.doxygen.nl/manual/index.html">User Manual</a>.</p>
<p>The generic starting point of the application is of course the <a class="el" href="df/d0a/main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> function.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Configuration options</h1>
<p>Configuration file data is stored in singleton class <a class="el" href="d0/d31/namespace_config.html" title="Public function to deal with the configuration file.">Config</a> and can be accessed using wrapper macros <a class="el" href="db/d16/config_8h.html#a737741e6991bdb5694a50075437a9d89">Config_getString()</a>, <a class="el" href="db/d16/config_8h.html#a06b59c3720174e9078f613095a89b295">Config_getInt()</a>, <a class="el" href="db/d16/config_8h.html#a15e896ce0b99792d1344b66af98928e7">Config_getList()</a>, <a class="el" href="db/d16/config_8h.html#afe899eec751dfb75a60c37ec3840e288">Config_getEnum()</a>, and <a class="el" href="db/d16/config_8h.html#a5373d0332a31f16ad7a42037733e8c79">Config_getBool()</a> depending on the type of the option.</p>
<p>The format of the configuration file (options and types) is defined by the file <code>config.xml</code>. As part of the build process, the python script <code>configgen.py</code> will create a file <code>configoptions.cpp</code> from this, which serves as the input for the configuration file parser that is invoked using <a class="el" href="d0/d31/namespace_config.html#a455ee38b43cec2501b11fd3696ab0ebd">Config::parse()</a>. The script <code>configgen.py</code> will also create the documentation for the configuration items, creating the file <code>config.doc</code>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Gathering Input files</h1>
<p>After the configuration is known, the input files are searched using <a class="el" href="dc/d98/doxygen_8cpp.html#a7ed1fdd15e6ed566c33a63fcd30d53c4">searchInputFiles()</a> and any tag files are read using <a class="el" href="dc/d98/doxygen_8cpp.html#a7389d7a8c7a2859d36b88ff0dc477cdb">readTagFile()</a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Parsing Input files</h1>
<p>The function parseFiles() takes care of parsing all files. It uses the <a class="el" href="d4/d0d/class_parser_manager.html" title="Manages programming language parsers.">ParserManager</a> singleton factory to create a suitable parser object for each file. Each parser implements the abstract interface ParserInterface.</p>
<p>If the parser indicates it needs preprocessing via ParserInterface::needsPreprocessing(), doxygen will call preprocessFile() on the file.</p>
<p>A second step is to convert multiline C++-style comments into C style comments for easier processing later on. As side effect of this step also aliases (ALIASES option) are resolved. The function that performs these 2 tasks is called <a class="el" href="de/d9a/commentcnv_8h.html#a04d92f4281c65ebe972f5bf92bcb4a09">convertCppComments()</a>.</p>
<p><em>Note:</em> Alias resolution should better be done in a separate step as it is now coupled to C/C++ code and does not work automatically for other languages!</p>
<p>The third step is the actual language parsing and is done by calling ParserInterface::parseInput() on the parser interface returned by the <a class="el" href="d4/d0d/class_parser_manager.html" title="Manages programming language parsers.">ParserManager</a>.</p>
<p>The result of parsing is a tree of <a class="el" href="d4/dd7/class_entry.html" title="Represents an unstructured piece of information, about an entity found in the sources.">Entry</a> objects. These <a class="el" href="d4/dd7/class_entry.html" title="Represents an unstructured piece of information, about an entity found in the sources.">Entry</a> objects are wrapped in a EntryNav object and stored on disk using Entry::createNavigationIndex() on the root node of the tree.</p>
<p>Each <a class="el" href="d4/dd7/class_entry.html" title="Represents an unstructured piece of information, about an entity found in the sources.">Entry</a> object roughly contains the raw data for a symbol and is later converted into a <a class="el" href="d5/dcc/class_definition.html" title="The common base class of all entity definitions found in the sources.">Definition</a> object.</p>
<p>When a parser finds a special comment block in the input, it will do a first pass parsing via parseCommentBlock(). During this pass the comment block is split into multiple parts if needed. Some data that is later needed is extracted like section labels, xref items, and formulas. Also <a class="el" href="d2/dc3/class_markdown.html" title="Helper class to process markdown formatted text">Markdown</a> markup is processed using processMarkdown() during this pass.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Resolving relations</h1>
<p>The <a class="el" href="d4/dd7/class_entry.html" title="Represents an unstructured piece of information, about an entity found in the sources.">Entry</a> objects created and filled during parsing are stored on disk (to keep memory needs low). The name, parent/child relation, and location on disk of each <a class="el" href="d4/dd7/class_entry.html" title="Represents an unstructured piece of information, about an entity found in the sources.">Entry</a> is stored as a tree of EntryNav nodes, which is kept in memory.</p>
<p><a class="el" href="de/d6a/class_doxygen.html" title="This class serves as a namespace for global variables used by doxygen.">Doxygen</a> does a number of tree walks over the EntryNav nodes in the tree to build up the data structures needed to produce the output.</p>
<p>The resulting data structures are all children of the generic base class called <a class="el" href="d5/dcc/class_definition.html" title="The common base class of all entity definitions found in the sources.">Definition</a> which holds all non-specific data for a symbol definition.</p>
<p><a class="el" href="d5/dcc/class_definition.html" title="The common base class of all entity definitions found in the sources.">Definition</a> is an abstract base class. Concrete subclasses are</p><ul>
<li><a class="el" href="d1/dcf/class_class_def.html" title="A abstract class representing of a compound symbol.">ClassDef</a>: for storing class/struct/union related data</li>
<li><a class="el" href="d0/d07/class_namespace_def.html" title="An abstract interface of a namespace symbol.">NamespaceDef</a>: for storing namespace related data</li>
<li><a class="el" href="de/db0/class_file_def.html" title="A model of a file symbol.">FileDef</a>: for storing file related data</li>
<li><a class="el" href="d4/dd4/class_dir_def.html" title="A model of a directory symbol.">DirDef</a>: for storing directory related data</li>
</ul>
<p>For doxygen specific concepts the following subclasses are available</p><ul>
<li><a class="el" href="d8/d09/class_group_def.html" title="A model of a group of symbols.">GroupDef</a>: for storing grouping related data</li>
<li><a class="el" href="dd/d41/class_page_def.html" title="A model of a page symbol.">PageDef</a>: for storing page related data</li>
</ul>
<p>Finally the data for members of classes, namespaces, and files is stored in the subclass <a class="el" href="da/d09/class_member_def.html" title="A model of a class/file/namespace member symbol.">MemberDef</a>.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Producing debug output</h1>
<p>Within doxygen there are a number of ways to obtain debug output. Besides the invasive method of putting print statements in the code there are a number of easy ways to get debug information.</p>
<ul>
<li>Compilation of <code>.l</code> files<br  />
 This is also an invasive method but it will be automatically done by the <code>flex / lex</code> command. The result is that of each input line the (lex) rule(s) that are applied on it are shown.<ul>
<li>windows<ul>
<li>in the Visual C++ GUI<ul>
<li>find the required <code>.l</code> file</li>
<li>select the <code>Properties</code> of this file</li>
<li>set the item <code>Write used lex rules</code> to <code>Yes</code></li>
<li>see to it that the <code>.l</code> file is newer than the corresponding <code>.cpp</code> file or remove the corresponding <code>.cpp</code> file</li>
</ul>
</li>
</ul>
</li>
<li>unices<ul>
<li>global change<br  />
 In the chapter "Doxygen's internals" a <code>perl</code> script is given to toggle the possibility of having the rules debug information.</li>
<li>command line change<br  />
 It is possible to the option <code>LEX="flex -d"</code> with the <code>make</code> command on the command line. In this case the <code>.l</code> that are converted to the corresponding <code>.cpp</code> files during this <code>make</code> get the rules debug information.<br  />
 To undo the rules debug information output just recompile the file with just <code>make</code>.<br  />
 Note this method applies for all the <code>.l</code> files that are rebuild to <code>.cpp</code> files so be sure that only the <code>.l</code> files(s) of which you want to have the rules debug information is (are) newer than the corresponding <code>.cpp</code> file(s).</li>
</ul>
</li>
</ul>
</li>
<li>Running doxygen<br  />
 During a run of doxygen it is possible to specify the <code>-d</code> option with the following possibilities (each option has to be preceded by <code>-d</code>):<ul>
<li>findmembers<br  />
 Gives of global, class, module members its scope, arguments and other relevant information.</li>
<li>functions<br  />
 Gives of functions its scope, arguments and other relevant information.</li>
<li>variables<br  />
 Gives of variables its scope and other relevant information.</li>
<li>classes<br  />
 Gives of classes en modules its scope and other relevant information.</li>
<li>preprocessor<br  />
 Shows the results of the preprocessing phase, i.e. results from include files, <code>#define</code> statements etc., definitions in the doxygen configuration file like: <code>EXPAND_ONLY_PREDEF</code>, <code>PREDEFINED</code> and <code>MACRO_EXPANSION</code>.</li>
<li>commentcnv<br  />
 Shows the results of the comment conversion, the comment conversion does the following:<ul>
<li>It converts multi-line C++ style comment blocks (that are aligned) to C style comment blocks (if <code>MULTILINE_CPP_IS_BRIEF</code> is set to <code>NO</code>).</li>
<li>It replaces aliases with their definition (see <code>ALIASES</code>)</li>
<li>It handles conditional sections (<code>\cond ... \endcond</code> blocks)</li>
</ul>
</li>
<li>commentscan<br  />
 Will print each comment block before and after the comment is interpreted by the comment scanner.</li>
<li>printtree<br  />
 Give the results in in pretty print way, i.e. in an XML like way with each level indented by a <code>"."</code> (dot).</li>
<li>time<br  />
 Provides information of the different stages of the doxygen process.</li>
<li>extcmd<br  />
 Shows which external commands are executed and which pipes are opened.</li>
<li>markdown<br  />
 Will print each comment block before and after <a class="el" href="d2/dc3/class_markdown.html" title="Helper class to process markdown formatted text">Markdown</a> processing.</li>
<li>filteroutput<br  />
 Gives the output of the output as result of the filter command (when a filter command is specified)</li>
<li>validate<br  />
 Currently not used</li>
<li>lex<br  />
 Provide output of the <code>lex</code> files used. When a lexer is started and when a lexer ends the name of the <code>lex</code> file is given so it is possible to see in which lexer the problem occurs. This makes it easier to select the file to be compiled in <code>lex</code> debug mode.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Producing output</h1>
<p>TODO</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Topics TODO</h1>
<ul>
<li><a class="el" href="d7/d59/struct_grouping.html" title="Grouping info">Grouping</a> of files in Model / Parser / Generator categories</li>
<li>Index files based on <a class="el" href="d9/dd5/class_index_intf.html" title="Abstract interface for index generators.">IndexIntf</a><ul>
<li>HTML navigation</li>
<li>HTML Help (chm)</li>
<li>Documentation Sets (XCode)</li>
<li>Qt Help (qhp)</li>
<li>Eclipse Help</li>
</ul>
</li>
<li>Search index<ul>
<li>JavaScript based</li>
<li>Server based</li>
<li>External</li>
</ul>
</li>
<li>Citations<ul>
<li>via bibtex</li>
</ul>
</li>
<li>Various processing steps for a comment block<ul>
<li>comment conversion</li>
<li>comment scanner</li>
<li>markdown processor</li>
<li>doc tokenizer</li>
<li>doc parser</li>
<li>doc visitors</li>
</ul>
</li>
<li>Diagrams and Images<ul>
<li>builtin</li>
<li>via Graphviz dot</li>
<li>via mscgen</li>
<li>PNG generation</li>
</ul>
</li>
<li>Output formats: OutputGen, <a class="el" href="df/dc8/class_output_list.html" title="Class representing a list of output generators that are written to in parallel.">OutputList</a>, and <a class="el" href="d0/d78/class_doc_visitor.html" title="Abstract visitor that participates in the visitor pattern.">DocVisitor</a><ul>
<li>Html: <a class="el" href="d7/d41/class_html_generator.html" title="Generator for HTML output">HtmlGenerator</a> and <a class="el" href="d5/d1b/class_html_doc_visitor.html" title="Concrete visitor implementation for HTML output.">HtmlDocVisitor</a></li>
<li>Latex: <a class="el" href="d3/d77/class_latex_generator.html" title="Generator for LaTeX output.">LatexGenerator</a> and <a class="el" href="d3/df4/class_latex_doc_visitor.html" title="Concrete visitor implementation for LaTeX output.">LatexDocVisitor</a></li>
<li>RTF: <a class="el" href="d0/da4/class_r_t_f_generator.html" title="Generator for RTF output.">RTFGenerator</a> and <a class="el" href="d1/d4b/class_r_t_f_doc_visitor.html" title="Concrete visitor implementation for RTF output.">RTFDocVisitor</a></li>
<li>Man: <a class="el" href="de/da5/class_man_generator.html" title="Generator for Man page output.">ManGenerator</a> and <a class="el" href="d8/dcf/class_man_doc_visitor.html" title="Concrete visitor implementation for LaTeX output.">ManDocVisitor</a></li>
<li>XML: <a class="el" href="d0/dc3/xmlgen_8cpp.html#a0f9b3e222369b7d908441a0825b0da84">generateXML()</a> and <a class="el" href="d4/dc8/class_xml_doc_visitor.html" title="Concrete visitor implementation for XML output.">XmlDocVisitor</a></li>
<li>print: debugging via <a class="el" href="d3/d43/class_print_doc_visitor.html">PrintDocVisitor</a></li>
<li>text: <a class="el" href="d2/d63/class_text_doc_visitor.html" title="Concrete visitor implementation for TEXT output.">TextDocVisitor</a> for tooltips</li>
<li>perlmod</li>
</ul>
</li>
<li>i18n via <a class="el" href="d8/dfb/class_translator.html" title="Abstract base class for all translatable text fragments.">Translator</a> and <a class="el" href="d2/d48/language_8cpp.html">language.cpp</a></li>
<li>Customizing the layout via <a class="el" href="dc/d1d/class_layout_doc_manager.html" title="Singleton providing access to the (user configurable) layout of the documentation">LayoutDocManager</a></li>
<li>Parsers<ul>
<li>C Preprocessing<ul>
<li>const expression evaluation</li>
</ul>
</li>
<li>C link languages</li>
<li>Python</li>
<li>Fortran</li>
<li>VHDL</li>
<li>Tag files</li>
</ul>
</li>
<li>Marshaling to/from disk</li>
<li>Portability functions</li>
<li>Utility functions </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">生成于 2021年 十一月 27日 星期六 08:41:09 , 为 Doxygen使用 
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
